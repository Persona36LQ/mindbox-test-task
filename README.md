https://docs.google.com/document/d/1Zl7Fj3HgLqc8Ecs_-W209S9UrpIbkji1_rgU9oK3jVU/edit

Привет! Вот мое решение тестового задание

Вместо циклов дня и ночи (все равно манифест есть) я использую динамическую проверку нагрузки

Теперь по пунктам ТЗ:

- у нас мультизональный кластер (три зоны), в котором пять нод ✅ (В kind прописаны labels и в манифестах они обрабатываются)
- приложение требует около 5-10 секунд для инициализации ❔ 
- по результатам нагрузочного теста известно, что 4 пода справляются с пиковой нагрузкой ❔
- на первые запросы приложению требуется значительно больше ресурсов CPU ❔, в дальнейшем потребление ровное в районе 0.1 CPU. По памяти всегда “ровно” в районе 128M memory ✅ (Ограничение ресурсов выставленно, с небольшим запасом)
- приложение имеет дневной цикл по нагрузке – ночью запросов на порядки меньше, пик – днём ✅ (manifests/scaling/cron_jobs)
- хотим максимально отказоустойчивый deployment ✅(Автоматическое горизонтальное масштабирование)
- хотим минимального потребления ресурсов от этого deployment’а ✅ (Ограничение ресурсов выставленно)

А теперь немного объяснений.

Использовал kind с указанием zone для каждой node для создания "мультизонального" кластера.

В директории manifests/ прописаны все манифесты с удобной организацией 

в deployments.yaml и services.yaml описание самого сервера

Корректно настроен securityContext, минимальные ресурсы взяты ниже заявленной в тз для потенциальной экономии.

В поддиректории manifests/security прописано все необходимое для работы manifests/scaling/cron_jobs.yaml , но ибо последнее не используется, в deploy.sh нет применения этой 

В manifests/scaling/HPAs.yaml прописаны кастомные CRDs для автоматического создания pods при нагрузке > 70% 
